<!DOCTYPE html>
<html>
  <head>
    <title>Brachial Plexus Experiment</title>
    <script src="jspsych-6.3.0/jspsych.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-preload.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-video-button-response.js"></script>
    <link href="jspsych-6.3.0/css/jspsych.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <script>
     var conditional_array = ["cond1", "cond2", "cond3"]
     var condition = jsPsych.randomization.sampleWithoutReplacement(conditional_array, 1,); // random sample
     
    var welcome = {
        type: 'html-keyboard-response',
        stimulus: 'Welcome to the experiment. This experiment looks to examine how prepatory materials impact student learning of a novel topic. Your participation is entirely voluntary and you can terminate your participation at any time. The study will take you about 30 - 40 minutes to complete. Once you are ready to begin, please any key to continue.'
    }

 //Experimental condition 1 = Multiple choice     
    var page_1_options = ["A: Cervical and Thoracic", "B: Thoracic and Lumbar", "C: Lumbar and Sacral", "D: Sacral and Coccygeal"];
    var page_2_options = ["A: Motor neurons", "B: Sensory neurons", "C: Both motor and sensory neurons",];
     
      var multi_choice_trial = {
        type: 'survey-multi-choice',
        questions: [
          {prompt: "What regions of the spinal cord contributes to the brachial plexus?", 
          name: 'Contributions_MC', 
          options: page_1_options, 
          required:true}, 
          {prompt: "What kinds of neurons are found in the brachial plexus?", 
          name: 'Neurons_MC', 
          options: page_2_options, 
          required:true}
        ],
      };
 //Experimental condition 2 = Free response 
      var free_response_trial = {
        type: 'survey-text',
        questions: [
           {prompt: "What regions of the spinal cord contributes to the brachial plexus?", name: 'Contributions_FR'}, 
           {prompt: "What kinds of neurons are found in the brachial plexus?", 
          name: 'Neurons_MC',}
        
  ],
};



//Control condition = Reading trial
var reading_trial = {
  type:'html-button-response',
  stimulus: 
    '<p> The brachial plexus is a network of nerves that gives rise to all the motor and sensory nerves of the upper extremity. This plexus arises from the anterior rami of spinal nerves C5-T1 that undergo several mergers and splits into trunks and divisions, until they finally give rise to their terminal branches. These terminal branches are responsible for motor and sensory innervation of the upper limb, and they include the musculocutaneous, axillary, radial, median and ulnar nerves. So, the brachial plexus originates from the ventral rami of the spinal nerves C5-T1. These rami quickly merge to form 3 trunks, which subsequently split into anterior and posterior division. This yields a total of 6 divisions (3 anterior and 3 posterior), which continue to pass inferiorly behind the clavicle to enter the axillary region. Finally, the divisions merge into cords of the brachial plexus, that give off the terminal branches of the brachial plexus. </p>',
  choices: ['Proceed to the next section'],
  };

var video = {
    type: 'video-button-response',
    stimulus: [
        'video/brachial_plexus_video.mp4',
    ],
    choices: ['Complete'],
    prompt: '<p>Please click the "Complete" button once you have finished watching the video.</p>'
}
var page_1_options = ["A: Cervical and Thoracic", "B: Thoracic and Lumbar", "C: Lumbar and Sacral", "D: Sacral and Coccygeal"];
var page_2_options = ["A: Motor neurons", "B: Sensory neurons", "C: Both motor and sensory neurons",];
      
      var post_test = {
        type: 'survey-multi-choice',
        questions: [
          {prompt: "What regions of the spinal cord contributes to the brachial plexus?", 
          name: 'Contributions_MC', 
          options: page_1_options, 
          required:true}, 
          {prompt: "What kinds of neurons are found in the brachial plexus?", 
          name: 'Neurons_MC', 
          options: page_2_options, 
          required:true}
      ]
      }
    let end = {
        type: `html-keyboard-response`,
        stimulus: `<p>Thank you for your time! You have now finished the experiment and you can exit the window.</p>`,
        on_load: function(){
          jsPsych.data.get()
            .localSave('csv', 'brachial_plexus_of_data.csv');
        }
      };
/* create timeline */

      let timeline = [welcome, condition, video, post_test, end];
    
      if (condition == "cond1") {
         timeline.push(multi_choice_trial);
     } else if(condition == "cond2") {
         timeline.push(free_response_trial);
     } else (timeline.push(reading_trial));
     
         

      /* start the experiment */
      jsPsych.init({
        timeline: timeline
        
      });
  
      </script>

    
  </body>
</html>
