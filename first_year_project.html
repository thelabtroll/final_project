<!DOCTYPE html>
<html>
  <head>
    <title>Brachial Plexus Experiment</title>
    <script src="jspsych-6.3.0/jspsych.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-preload.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-video-button-response.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-survey-text.js"></script>
    <link href="jspsych-6.3.0/css/jspsych.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <script>
     
    var welcome = {
        type: 'html-keyboard-response',
        stimulus: 'Welcome to the experiment. This experiment looks to examine how prepatory materials impact to student learning of a novel topic. Your participation is entirely voluntary and you can terminate your participation at any time. The study will take you about 30 - 40 minutes to complete. Once you are ready to begin, please any key to continue.'
    }
    var page_1_options = ["A: Cervical and Thoracic", "B: Thoracic and Lumbar", "C: Lumbar and Sacral", "D: Sacral and Coccygeal"];
    var page_2_options = ["A: Motor neurons", "B: Sensory neurons", "C: Both motor and sensory neurons",];
      
      var multi_choice_trial = {
        type: 'survey-multi-choice',
        questions: [
          {prompt: "What regions of the spinal cord contributes to the brachial plexus?", 
          name: 'Contributions_MC', 
          options: page_1_options, 
          required:true}, 
          {prompt: "What kinds of neurons are found in the brachial plexus?", 
          name: 'Neurons_MC', 
          options: page_2_options, 
          required:true}, 
          {prompt: "I like fruit", name: 'Fruit', options: page_2_options, required: true}
        ],
      };
      
      var free_response_trial = {
        type: 'survey-text',
        questions: [
           {prompt: "What regions of the spinal cord contributes to the brachial plexus?", name: 'Contributions_FR'}, 
           {prompt: "What kinds of neurons are found in the brachial plexus?", 
          name: 'Neurons_MC',}
        
  ],
};
var check_consent = function(elem) {
  if (document.getElementById('consent_checkbox').checked) {
    return true;
  }
  else {
    alert("If you wish to participate, you must check the box next to the statement 'I agree to participate in this study.'");
    return false;
  }
  return false;
};


// declare the block.
var reading_trial = {
  type:'external-html',
  url: "brachial_plexus_reading.html",
  cont_btn: "start",
  check_fn: check_consent
};
var video = {
    type: 'video-button-response',
    stimulus: [
        'video/brachial_plexus_video.mp4',
    ],
    choices: ['Complete'],
    prompt: '<p>Please click the "Complete" button once you have finished watching the video.</p>'
}
var page_1_options = ["A: Cervical and Thoracic", "B: Thoracic and Lumbar", "C: Lumbar and Sacral", "D: Sacral and Coccygeal"];
var page_2_options = ["A: Motor neurons", "B: Sensory neurons", "C: Both motor and sensory neurons",];
      
      var post_test = {
        type: 'survey-multi-choice',
        questions: [
          {prompt: "What regions of the spinal cord contributes to the brachial plexus?", 
          name: 'Contributions_MC', 
          options: page_1_options, 
          required:true}, 
          {prompt: "What kinds of neurons are found in the brachial plexus?", 
          name: 'Neurons_MC', 
          options: page_2_options, 
          required:true}
      ]
      }

/* create timeline */
      // here we create a list of the trials
      let timeline = [welcome, multi_choice_trial, video, post_test];

      /* start the experiment */
      jsPsych.init({
        timeline: timeline
      });
//       var pre_if_trial = {
//     type: 'html-keyboard-response',
//     stimulus: 'The next trial is in a conditional statement. Press S to skip it, or V to view it.'
// }

// var if_trial = {
//     type: 'html-keyboard-response',
//     stimulus: 'You chose to view the trial. Press any key to continue.'
// }

// var if_node = {
//     timeline: [if_trial],
//     conditional_function: function(){
//         // get the data from the previous trial,
//         // and check which key was pressed
//         var data = jsPsych.data.get().last(1).values()[0];
//         if(jsPsych.pluginAPI.compareKeys(data.response, 's')){
//             return false;
//         } else {
//             return true;
//         }
//     }
// }

// var after_if_trial = {
//     type: 'html-keyboard-response',
//     stimulus: 'This is the trial after the conditional.'
// }

// jsPsych.init({
//     timeline: [pre_if_trial, if_node, after_if_trial],
//     on_finish: function(){jsPsych.data.displayData(); }
// });
      </script>

    
  </body>
</html>
